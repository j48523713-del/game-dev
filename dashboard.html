<!DOCTYPE html>
<html>
<head>
    <title>Server Dashboard - Operation Cyberspace</title>
    <style>
        body { font-family: monospace; background: #1a1a1a; color: #0f0; padding: 20px; }
        h1 { border-bottom: 2px solid #0f0; padding-bottom: 10px; }
        .panel { background: #222; border: 1px solid #444; padding: 15px; margin-bottom: 20px; }
        table { width: 100%; border-collapse: collapse; }
        th, td { text-align: left; padding: 8px; border-bottom: 1px solid #333; }
        th { color: #fff; }
        button { background: #004400; color: #0f0; border: 1px solid #0f0; padding: 10px 20px; cursor: pointer; font-family: monospace; font-size: 16px; }
        button:hover { background: #006600; }
        button:active { background: #0f0; color: #000; }
        .offline { color: #666; }
    </style>
</head>
<body>
    <h1>OPERATION CYBERSPACE // COMMAND CONSOLE</h1>
    
    <div class="panel">
        <h2>Admin Controls</h2>
        <button onclick="spawnEnemies('NORMAL')">SPAWN PATROL</button>
        <button onclick="spawnEnemies('BOSS')" style="color:red; border-color:red;">[!] SPAWN BOSS</button>
        <button onclick="spawnEnemies('VIRUS')" style="color:yellow; border-color:yellow;">SPAWN VIRUS</button>
        <button onclick="spawnEnemies('HORDE')">SPAWN HORDE</button>
    </div>

    <div class="panel">
        <h2>Online Players</h2>
        <table id="player-table">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Username</th>
                    <th>Suit Type</th>
                    <th>Status</th>
                </tr>
            </thead>
            <tbody id="player-list">
                <!-- Populated by JS -->
            </tbody>
        </table>
    </div>

    <script>
        function fetchStats() {
            fetch('/api/stats')
                .then(res => res.json())
                .then(data => {
                    const tbody = document.getElementById('player-list');
                    tbody.innerHTML = '';
                    
                    if (data.length === 0) {
                        tbody.innerHTML = '<tr><td colspan="4" class="offline">No active signals...</td></tr>';
                        return;
                    }

                    data.forEach(p => {
                        let row = `<tr>
                            <td>${p.id}</td>
                            <td>${p.username}</td>
                            <td>${p.type}</td>
                            <td style="color:lime">ONLINE</td>
                        </tr>`;
                        tbody.innerHTML += row;
                    });
                })
                .catch(err => console.error(err));
        }

        function spawnEnemies(type) {
            fetch('/api/admin/spawn', { 
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ type: type })
            })
                .then(res => res.json())
                .then(data => {
                    alert("Command Sent: SPAWN_ENEMIES");
                });
        }

        // Auto-refresh every 2 seconds
        setInterval(fetchStats, 2000);
        fetchStats();
    </script>
</body>
</html>